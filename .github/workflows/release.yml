name: Release

# Trigger: Nur bei Tags wie v1.2.1, v2.0.0
on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest

    steps:
      # 1. Repository klonen
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0 # Vollständige History für Changelog

      # 2. Release erstellen (automatische Notes aus CHANGELOG.md)
      - name: Create Release
        uses: softprops/action-gh-release@v2 # Offizielles Action [web:39]
        with:
          # Automatische Release Notes aus Commits/CHANGELOG
          generate_release_notes: true
          # Dateien zum Download hinzufügen
          files: |
            jaalee-parser.js
            README.de.md
            README.md
          # Präfix für Version (optional)
          tag_name: ${{ github.ref_name }}
          name: Jaalee JHT Parser v${{ github.ref_name }}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
